\documentclass[a4paper]{article}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{bussproofs}
\usepackage{mathtools}
\usepackage{verbatim}
\usepackage{dsfont}
\usepackage{mathabx}
\usepackage[all, 2cell]{xy}
\usepackage[all]{xy}
\usepackage{wasysym}
\usepackage{rotating}
\usepackage{geometry}
\usepackage{trfsigns}
\usepackage{cmll}
\usepackage{authblk}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{lipsum}
\usepackage{extpfeil}
\usepackage{soul}
\usepackage{graphicx}

\newcommand\mapsfrom{\mathrel{\reflectbox{\ensuremath{\mapsto}}}}

\theoremstyle{definition}
\newtheorem{definition}{Definition}

\theoremstyle{theorem}
\newtheorem{theorem}{Theorem}

\theoremstyle{proposition}
\newtheorem{proposition}{Proposition}

\theoremstyle{lemma}
\newtheorem{lemma}{Lemma}

\theoremstyle{ex}
\newtheorem{ex}{Example}

\theoremstyle{corollary}
\newtheorem{corollary}{Corollary}

\theoremstyle{claim}
\newtheorem{claim}{Claim}

\newcommand{\down}[1]{\ensuremath{{\downarrow}\,#1}}
\newcommand{\up}[1]{\ensuremath{{\uparrow}\,#1}}

\author{Daniel Rogozin \\ Institute for Information Transmission Problems, Russian Academy of Sciences \\ daniel.rogozin@serokell.io}
\date{}
\title{The finite representation property for some reducts of relation algebras}
\providecommand{\keywords}[1]{\textbf{\textit{Keywords---}} #1}

\begin{document}

\maketitle

\begin{abstract}
In this paper, we show that the class of representable residuated semigroups has the finite representation property. That is, every finite representable residuated semigroup is isomorphic to some algebra over a finite base. This result gives a positive solution to Problem 19.17 from the monograph by Hirsch and Hodkinson \cite{hirsch2002relation}.

We also show that the class of representable join semilattice-ordered semigroups has a recursively
enumerable recursive axiomatisation and the finite representation property.
\end{abstract}

\keywords{relation algebras, finite representation property, residuated semigroups, join semilattice-ordered semigroups}

\section{Introduction}

Relation algebras are the kind of Boolean algebras with operators that provide algebraisation
of binary relations \cite{jonsson1951boolean}. The class of all relation algebras,
denoted as ${\bf RA}$, consists of algebras the signature of which is $\{ 0, 1, +, -, ;, {}^{\smile}, {\bf 1}' \}$ obeying certain axioms.
The class of representable relation algebras, ${\bf RRA}$, consists of algebras isomorphic to set relation algebras. ${\bf RRA}$ is a subclass of ${\bf RA}$, but the converse inclusion does not hold.
That is, there exist relation algebras with no representation as set relation algebras
\cite{lyndon1950representation}. Moreover, the class ${\bf RRA}$ is not finitely axiomatisable \cite{monk1964representable}. The problem of determining whether a given finite relation algebra
is representable is undecidable, see \cite{hirsch2001representability}.

In other words, relation algebras are quite badly behaved. The study of such reducts is mostly motivated by such ``bad behaviour'' in order to avoid these restrictions and determine the possible reasons for them.

There are several results on reducts of relation algebras having no finite axiomatisation such as ordered monoids \cite{hirsch2005class}, distributive residuated lattices \cite{andreka1994lambek}, join semilattice-ordered semigroups \cite{andreka2011axiomatizability}, algebras whose signature contains composition, meet, and converse \cite{hodkinson2000axiomatizability}, etc.

On the other hand, such classes as representable residuated semigroups and monoids \cite{andreka1994lambek}, and ordered domain algebras \cite{hirsch2013ordered} are finitely axiomatisable. There are also plenty of subsignatures for which the question of finite axiomatisability remains open, see, e. g., \cite{andreka2011axiomatizability}.

The other direction we emphasise is related to finite representability. A finite algebra of relations has the finite representation property if it is isomorphic to some algebra of relations on a finite base. The investigation of this problem is of interest to study such aspects as the decidability of membership of ${\bf R}(\tau)$. The finite representation property also implies recursivity of the class of all finite representable $\tau$-structures \cite{hirsch2004finite}, if the whole class is finitely axiomatisable.  Here, $\tau$ is a subsignature of operations definable in $\{ 0, 1, +, -, ;, {}^{\smile}, {\bf 1 } \}$. The examples of the class having the finite representation property are some classes of algebras \cite{hirsch2004finite} \cite{hirsch2013ordered} \cite{mclean2016finite}, the subsignature of which contains the domain and range operators. The other kind of algebras of binary relations having the finite representation property is semigroups with so-called demonic refinement has been recently studied by Hirsch and \v{S}emrl \cite{hirsch2020finite}.

There are subsignatures $\tau$ such that the class ${\bf R}(\tau)$ of representable reducts fails to have the finite representation property. For instance, $\{;, \cdot\}$, see \cite{maddux2016finite}. In general, (un)decidability of determining whether a finite relation algebra has a finite representation is an open question \cite[Problem 18.18]{hirsch2002relation}.

In this paper, we consider reducts of relation algebras the signature of which consists of composition, residuals, and the binary relation symbol denoting partial ordering, that is, the class of representable residuated semigroups. We show that ${\bf R}(;, \setminus, /, \leq)$ has the finite representation property. As result, Problem 19.17 of \cite{hirsch2002relation} has a positive solution. We also note that this result implies of membership decidability of ${\bf R}(;, \setminus, /, \leq)$ for finite structures and the class of finite representable residuated semigroups is recursive. The solution is surprisingly simple and based on the Dedekind-MacNeille completion and the relation representation of quantales. We consider a finite residuated semigroup and embed into a finite quantale mapping every element to its lower cone. After that, we apply the relational representation for quantales. As a result, the original finite residuated semigroup has a Zaretski-style representation \cite{zaretskii1959representation} and this satisfies the finite base requirement.

In the last section, we study the class of representable join semilattice-ordered semigroups, denoted as ${\bf R}(;,+)$. It is
already known that this class is not finitely axiomatisable \cite{andreka2011axiomatizability}.
First, we show that ${\bf R}(;,+)$ has a recursively enumerable axiomatisation. For that,
we define networks and representability games for them. This class is axiomatised with the axioms of join semilattice-ordered semigroups plus the countable set of universal formulas claiming that
$\exists$ has a winning strategy on every finitary step.

After that, we show that ${\bf R}(;,+)$ has the finite representation property using the same relational representation of quantales. In particular, we prove that, if $\mathcal{A} \in {\bf R}(;,+)$ is finite and representable, then the image $h(\mathcal{A})$ is isomorphic to its quantale representation. Here $h$ is a representation of $\mathcal{A}$. As a consequence, the representability of finite join-semilattice ordered semigroups is decidable.

\section{Preliminaries}

Let us the basic definitions related to relation algebras \cite{hirsch2002relation}.
\begin{definition} A relation algebra is an algebra $\mathcal{R} = \langle R, 0, 1, +, -, ;, {}^{\smile}, {\bf 1 }\rangle$ such that $\langle R, 0, 1, +, - \rangle$ is a Boolean algebra and the following equations hold, for each $a, b, c \in R$:
    \begin{enumerate}
      \item $a ; (b ; c) = (a ; b) ; c$,
      \item $(a + b) ; c = (a ; c) + (b ; c)$,
      \item $a ; {\bf 1}' = a$,
      \item $a^{\smile \smile} = a$,
      \item $(a + b)^{\smile} = a^{\smile} + b^{\smile}$,
      \item $(a ; b)^{\smile} = b^{\smile} ; a^{\smile}$,
      \item $a^{\smile} ; (- (a ; b)) \leq - b$.
    \end{enumerate}
    Note that $a \leq b$ iff $a + b = b$ iff $a \cdot b = a$, where $a \cdot b = - (- a + - b)$. ${\bf RA}$ is the class of all relation algebras.
\end{definition}

\begin{definition}
    A proper relation algebra (or, a set relation algebra) is an algebra $\mathcal{R} = \langle R, 0, 1, \cup, -, ;, {}^{\smile}, {\bf 1 }\rangle$ such that $R \subseteq \mathcal{P}(W)$, where $X$ is a base set, $W \subseteq X \times X$ is an equivalence relation, $0 = \emptyset$, $1 = W$, $\cup$ and $-$ are set-theoretic union and complement respectively, $;$ is relation composition, ${}^{\smile}$ is relation converse,
    ${\bf 1}'$ is the identity relation restricted to $W$, that is:
    \begin{enumerate}
    \item $a ; b = \{ \langle x, z \rangle \in W \: | \: \exists y \: \langle x, y \rangle \in a \: \& \: \langle y, z \rangle \in b \}$
    \item $a^{\smile} = \{ \langle x, y \rangle \in W \: | \: \langle y, x \rangle \in a \}$
    \item ${\bf 1}' = \{ \langle x, y \rangle \in W \: | \: x = y \}$
    \end{enumerate}
       ${\bf PRA}$ is the class of all proper relation algebras. ${\bf RRA}$ is the class of all representable relation algebras, that is, the closure of ${\bf PRA}$ under isomorphic copies.
\end{definition}

We will use the following notation due to, for example, \cite{hirsch2011positive}. Let $\tau$ be a subset of operations and predicates definable in ${\bf RA}$. ${\bf R}(\tau)$ is the class of subalgebras of $\tau$-subreducts of algebras belonging to ${\bf RRA}$. We assume that ${\bf R}(\tau)$ is closed under isomorphic copies.

A $\tau$-structure is \emph{representable} if it is isomorphic to some algebra of relations of $\tau$-signature. A representable finite $\tau$-structure has a \emph{finite representation over a finite base} if it is isomoprhic to some finite representable over a finite base. ${\bf R}(\tau)$ has the finite representation property if every $\mathcal{A} \in {\bf R}(\tau)$ has a finite representation over a finite base.

One may express residuals in every $\mathcal{R} \in {\bf RA}$ as follows using Boolean negation, inversion, and composition as follows:

\begin{enumerate}
  \item $a \setminus b = -(a^{\smile} ; -b)$
  \item $a \: / \: b = - (- a ; b^{\smile})$
\end{enumerate}

These residuals have the following explicit definition in $\mathcal{R} \in {\bf PRA}$:
\begin{enumerate}
  \item $a \setminus b = \{ \langle x, y \rangle \: | \: \forall z \: (z, x) \in a \Rightarrow (z, y) \in b \}$
  \item $a \: / \: b = \{ \langle x, y \rangle \: | \: \forall z \: (y, z) \in b \Rightarrow (x, z) \in a \}$
\end{enumerate}

One may visualise residuals in ${\bf RRA}$ with the following triangles:

\xymatrix{
&& \exists y \ar@{-->}[ddr]^{b} &&& \forall z \ar@{-->}[ddl]_{a} \ar@{-->}[ddr]^{b} &&& \forall z \\
&&&&& \Rightarrow &&& \Leftarrow \\
& x \ar@{-->}[uur]^{a} \ar[rr]_{a;c} && z & x \ar[rr]_{a \setminus b} && y & x \ar@{-->}[uur]^{a} \ar[rr]_{a / b} && y \ar@{-->}[uul]_{b}
}

A \emph{residuated semigroup} is a structure $\mathcal{A} = \langle A, ;, \leq, \setminus, / \rangle$ such that $\langle A, ;, \leq, \rangle$ is a partially ordered residuated semigroup and $\setminus, /$ are binary operations satisfying the residuation property:

  \begin{center}
    $b \leq a \setminus c \Leftrightarrow a ; b \leq c \Leftrightarrow a \leq c \: / \: b$
  \end{center}
  ${\bf RS}$ is the class of all residuated semigroups.

Let $\mathcal{A}$ be a semigroup and $X, Y \subseteq \mathcal{A}$, then $X \: ; \: Y = \{ x \: ; \: y \: | \: x \in X, y \in Y \}$.

A \emph{join semilattice-ordered semigroup} is an algebra $\mathcal{A} = \langle A, ;, + \rangle$ such that $\langle A, ; \rangle$ is a semigroup, $\langle A, + \rangle$ is a join semilattice, and the following identity holds for all $a, b, c \in A$ the identity $a ; (b + c) = a ; b + a ; c$ holds.
Every join semilattice-ordered semigroup is a poset and ordering is defined as $a \leq b$ iff $a + b = b$.

\begin{definition}\label{joinrep}
  A \emph{representation} $R$ of a join semilattice-ordered semigroup $\mathcal{A}$
  is an injection $R : \mathcal{A} \to 2^{D \times D}$ (where $D$ is a non-empty base set) such that
  \begin{enumerate}
    \item $(a + b)^R = a^R \cup b^R$
    \item $(a ; b)^R = a^R ; b^R$
  \end{enumerate}
\end{definition}

A join semilattice-ordered semigroup $\mathcal{A}$ is \emph{representable}, if there exists a non-empty set $D$ and a function $f : \mathcal{A} \to 2^{D \times D}$ such that $f$ is a representation of $\mathcal{A}$.

Let us also remind the reader several order-theoretic notions. Let $\langle P, \leq \rangle$ be a partial order. An upper cone generated by $x$ is the set $\up{x} = \{ a \in P \: | \: x \leq a \}$. Let $A \subseteq P$, then $\up{A} = \bigcup \limits_{x \in A} \up{x} = \{ a \in P \: | \: \exists x \in P \: x \leq a \}$. The set of all upper cones of a poset $\langle P, \leq \rangle$ is denoted as $\operatorname{Up}(P)$. Given $a \in P$, a \emph{lower cone} generated by $a$ is a subset $\down{a} = \{ x \in P \: | \: x \leq a \}$.

A \emph{closure operator} on a poset $\langle P, \leq \rangle$ is a monotone map $j : P \to P$
such that for each for each $a \in P$:
\begin{enumerate}
  \item $a \leq j a$
  \item $j j a \leq j a$
\end{enumerate}

\section{The finite representation property for residuated semigroups}

The problem we are interested in is the following \cite[Problem 19.17]{hirsch2002relation}:

\begin{center}
  Does ${\bf R}(;, \setminus, /, \leq)$ have the finite representation property?
\end{center}

The class ${\bf R}(;, \setminus, /, \leq)$ consists of the following structures, here is the explicit definition:

\begin{definition} \label{rrs}
  Let $A$ be a set of binary relations on some base set $W$ such that $R = \cup A$ is transitive and $W$ is a domain of $R$. A relation residuated semigroup is an algebra $\mathcal{A} = \langle A, ;, \setminus, /, \subseteq \rangle$ where for each $a, b \in A$
  \begin{enumerate}
    \item $a ; b = \{ (x, z) \: | \: \exists y \in W \: ((x, y) \in a \: \& \: (y, z) \in b) \}$,
    \item $a \setminus b = \{ (x, y) \: | \: \forall z \in W \: ((z, x) \in a \Rightarrow (z, y) \in b)\}$,
    \item $a \: / \: b = \{ (x, y) \: | \: \forall z \in W \: ((y, z) \in b \Rightarrow (x, z) \in a)\}$,
    \item $a \leq b$ iff $a \subseteq b$.
  \end{enumerate}
\end{definition}

A residuated semigroup is called \emph{representable} if it is isomorphic to some algebra belonging to ${\bf R}(;, \setminus, /, \leq)$.

\begin{definition}
  Let $\tau = \{ ;, \setminus, /, \leq \}$, $\mathcal{A}$ a $\tau$-structure, and $X$ a base set. An \emph{interpretation} $R$ over a base $X$ maps every $a \in \mathcal{A}$ to a binary relation $a^R \subseteq X \times X$. A \emph{representation} of $\mathcal{A}$ is an interpretation $R$ satisfying the following conditions:

  \begin{enumerate}
    \item $a \leq b$ iff $a^R \subseteq b^R$,
    \item $(a;b)^R = \{ (x, y) \: | \: \exists z \in X \: (x, z) \in a^R \: \& \: (z, x) \in b^R \} = a^R ; b^R$,
    \item $(a \setminus b)^{R} = \{ (x, y) \: | \: \forall z \in X \: ((z, x) \in a^R \Rightarrow (z, y) \in b^R)\} = a^R \setminus b^R$,
    \item $(a \: / \: b)^{R} = \{ (x, y) \: | \: \forall z \in X \: ((y, z) \in a^R \Rightarrow (x, z) \in b^R)\} = a^R \: / \: b^R$.
  \end{enumerate}
\end{definition}

 Andr\'{e}ka and Mikul\'{a}s proved the representation theorem for ${\bf RS}$ (\cite{andreka1994lambek}) in the step-by-step fashion. See this paper to learn more about step-by-step representations in general \cite{hirsch1997step}. As it well known, the logic of such structures is the Lambek calculus \cite{lambek1958mathematics}, so we also have the relational completeness of the Lambek calculus.

This fact also claims that the theory of ${\bf R}(;, \setminus, /, \leq)$ is finitely axiomatisable since their theories coincide, and the class of all residuated semigroup is finitely axiomatisable.

One may rephrase the result of the theorem by Andr\'{e}ka and Mikul\'{a}s as $\mathcal{A}$ is representable iff $\mathcal{A}$ is a residuated semigroup, where $\mathcal{A}$ is a structure of the signature $\{ ;, \setminus, /, \leq \}$. Thus, it is sufficient to show that any finite residuated semigroup has a representation over a finite base in order to show that ${\bf R}(;, \setminus, /, \leq)$ has the finite representation property. For that, we will use the representation of residuated
semigroups as subalgebras of quantales and the relational representation of quantales.

A quantale is a complete lattice-ordered semigroup. Quantales has been initially introduced by Mulvey to provide a noncommutative generalisation of locales, see \cite{mulvey1986suppl}. The rigorous definition is the following:

\begin{definition}
  A \emph{quantale} is a structure $\mathcal{Q} = \langle Q, ;, \Sigma \rangle$ such that $\mathcal{Q} = \langle Q, \Sigma \rangle$ is a complete lattice, $\langle Q, ; \rangle$ is a semigroup, and the following conditions hold for each $a \in Q$ and $A \subseteq Q$:
  \begin{enumerate}
    \item $a \: ; \: \Sigma A = \Sigma \{ a ; q \: | \: q \in A \}$,
    \item $\Sigma A \: ; \: a = \Sigma \{ q ; a \: | \: q \in A \}$.
  \end{enumerate}
\end{definition}

Given a quantale $\mathcal{Q} = \langle Q, ;, \Sigma \rangle$, a set of \emph{generators} is a subset $\mathcal{G}(\mathcal{Q}) \subseteq \mathcal{Q}$, if
\begin{enumerate}
  \item For every $q \in Q$ one has $q \leq \Sigma \{ g \in \mathcal{G}(\mathcal{Q}) \: | \: g \leq q \}$.
  \item For every $g \in \mathcal{G}(\mathcal{Q})$ and $q_1, q_2 \in \mathcal{Q}$, $g \leq q_1 ; q_2$ implies $g \leq q_1 ; r$ for some $r \in \mathcal{G}(\mathcal{Q})$ with $r \leq q_2$.
\end{enumerate}

Every generator is completely join-irreducible, this follows from the definition immediatly.

Note that any quantale is a residuated semigroup as well. Given a quantale $\mathcal{Q} = \langle Q, ;, \Sigma \rangle$, One may express residuals with supremum and product as follows for each $a, b \in Q$:
\begin{enumerate}
  \item $a \setminus b = \Sigma \{ c \in Q \: | \: a ; c \leq b \}$,
  \item $a \: / \: b = \Sigma \{ c \in Q\: | \: b ; c \leq a \}$.
\end{enumerate}
Note that, if a residual exists, then it is unique.

A quantic nucleus is a closure operator on a quantale allowing one to define subquantales. Such an operator is a generalisation of a well-known nucleus operator from locale theory, see, e. g., \cite{bezhanishvili2016locales}. The following definition and the proposition below are due to \cite[Definition 3.1.1, Theorem 3.1.1]{rosenthal1990quantales} respectively.
\begin{definition}
  A \emph{quantic nucleus} on a quantale $\langle A, ;, \Sigma \rangle$ is a mapping $j : A \to A$ such that $j$ a closure operator satisfying $j a ; j b \leq j (a ; b)$.
\end{definition}

\begin{proposition} \label{subsemi}
  Let $\mathcal{A} = \langle A, ;, \Sigma \rangle$ be a quantale and $j$ a quantic nucleus, the set
  $\mathcal{A}_j = \{ a \in A \: | \: j a = a \}$ forms a quantale, where $a ;_j b = j(a ; b)$ and $\Sigma_j A = j (\Sigma A)$ for each $a, b \in {A}_j$ and $A \subseteq \mathcal{A}_j$.
\end{proposition}

One may embed any residuated semigroup into some quantale with the Dedekind-MacNeille completion (see, for example, \cite{theunissen2007macneille}) as follows. According to Goldblatt \cite{goldblatt2006kripke}, residuated semigroups have the following representation based on quantic nuclei and the Galois connection.

We need this construction to solve the problem, let us discuss it briefly. See Goldblatt's paper to have a complete argument in more detail \cite{goldblatt2006kripke}.

Let $\mathcal{A} = \langle A, \leq, ;, \setminus, / \rangle$ be a residuated semigroup. Then $\langle \mathcal{P}(A), ;, \bigcup \rangle$ is a quantale, where the product operation on subsets is defined with the pairwise products of their elements.

Let $X \subseteq A$. We put $lX$ and $uX$ as the sets of lower and upper bounds of $X$ in $A$. We also put $m X = lu X$.
Note that the lower cone of an arbitrary $x$ is $m$-closed, that is,
$m (\down{x}) = \down{x}$.

$m : \mathcal{P}(A) \to \mathcal{P}(A)$ is a closure operator and the set

\begin{center}
$(\mathcal{P}(A))_m = \{ X \in \mathcal{P}(S) \: | \: m X = X\}$ )
\end{center}
forms a complete lattice with $\Sigma_{m} \mathcal{X} = m ( \bigcup \mathcal{X})$ and $\Pi_{m} = \bigcap \mathcal{X}$, see \cite[Theorem 7.3]{davey2002introduction}.

The key observation is that $m$ is a quantic nucleus on $\mathcal{P}(A)$, that is, $m A ; m B \subseteq m (A ; B)$. We refer here to the Goldblatt's paper mentioned above.

Thus, according to Proposition~\ref{subsemi}, $\langle (\mathcal{P}(A))_m, \subseteq, ;_m \rangle$ is a quantale itself since $m$ is a quantic nucleus.

Let us define a mapping $f_m : \mathcal{A} \to (\mathcal{P}(A))_m$ such that $f_m : a \mapsto \down{a}$. This map is well-defined since any lower cone generated by a point is $m$-closed. Moreover, $f_m$ preserves products, residuals, and existing suprema. In particular, $f_m$ is a residuated semigroup embedding.

As a result, we have the following representation theorem.

\begin{theorem} \label{orsRep}
  Every residuated semigroup has an isomorphic embedding to the subalgebra of some quantale.
\end{theorem}

Quantales, in turn, are representable with binary relations. The notion of a relational quantale was introduced by Brown and Gurr to represent quantales as algebras of relations \cite{brown1993representation}.
\begin{definition}
  Let $A$ be a non-empty set. A \emph{relational quantale} on $A$ is an algebra $\langle R, \subseteq, ; \rangle$, where
  \begin{enumerate}
    \item $R \subseteq \mathcal{P}(A \times A)$,
    \item $\langle R, \subseteq \rangle$ is a complete join-semilattice,
    \item $;$ is a relational composition that respects all suprema in both coordinates.
  \end{enumerate}
\end{definition}

The uniqueness of residuals in any quantale implies the following fact.
\begin{proposition}\label{ok}
  Let $\mathcal{A}$ be a relational quantale over a base set $X$, then for each $a, b \in \mathcal{A}$
  \begin{enumerate}
    \item $a \setminus b = \{ (x, y) \in X^2 \: | \: \forall z \in X ( (z, x) \in a \Rightarrow (z, y) \in b) \}$,
    \item $a \: / \: b = \{ (x, y) \in X^2 \: | \: \forall z \in X ( (y, z) \in b \Rightarrow (x, z) \in b )\}$.
  \end{enumerate}
\end{proposition}

The mapping $a \mapsto \hat{a}$ satisfies the following conditions:

\begin{enumerate}
\item $a \leq b$ iff $\hat{a} \subseteq \hat{b}$,

\item $\widehat{\Sigma A} = \Sigma \widehat{A}$, $\hat{a} ; \hat{b} = \widehat{a ; b}$, and $\langle \widehat{\mathcal{Q}}, \subseteq, \Sigma \rangle$ is a complete lattice,

\item $\langle \widehat{\mathcal{Q}}, \subseteq, ; \rangle$ is a relational quantale,

\item $\mathcal{Q}$ is isomorphic to $\langle \widehat{\mathcal{Q}}, \subseteq, ; \rangle$ and $a \mapsto \hat{a}$ is a quantale isomorphism.
\end{enumerate}

We summarise the construction above with the following theorem proved by Brown and Gurr, see \cite[Theorem 3.11]{brown1993representation}.

\begin{theorem} \label{quantaleRep}
  Every quantale $\mathcal{Q} = \langle Q, ;, \Sigma \rangle$ is isomorphic to a relational quantale on $Q$ as a base set.
\end{theorem}

We describe how we use Theorem~\ref{orsRep}, Proposition~\ref{ok}, and Theorem~\ref{quantaleRep} and constructions from their proofs to obtain an interpretation of the signature of residuated semigroups on ${\bf R}(;, \setminus, /, \leq)$.

Let $\mathcal{A}$ be a residuated semigroup and $\mathcal{Q}_{\mathcal{A}}$ is a quantale of Galois closed subsets of $\mathcal{A}$. $\widehat{\mathcal{Q}_{\mathcal{A}}}$ is the corresponding relational quantale. Let us define an interpretation $R : \mathcal{A} \to \widehat{\mathcal{Q}_{\mathcal{A}}}$ such that:

\begin{center}
  $R : a \mapsto a^{R} = \widehat{\down{a}}$
\end{center}

According to the lemma below, such an interpretation is a representation. As we have already said above, the function $a \mapsto \down{a}$ is order-preserving and it commutes with products and residuals.

\begin{lemma}
  Let $\tau$ be a signature of residuated semigroups. An interpretation $R : \mathcal{A} \to \widehat{\mathcal{Q}_{\mathcal{A}}}$ such that $R : a \mapsto a^{R} = \widehat{\down{a}}$ is a $\tau$-representation.
\end{lemma}

\begin{proof}
  By Theorem~\ref{orsRep}, $\mathcal{Q}_{\mathcal{A}}$ is isomorphic to $\widehat{\mathcal{Q}_{\mathcal{A}}}$. The isomorphism is established with the map $\downarrow{a} \mapsto \widehat{\down{a}}$ according to Theorem~\ref{quantaleRep}.
  Residuals in $\widehat{\mathcal{Q}_{\mathcal{A}}}$ are well-defined by Proposition~\ref{ok}.
\end{proof}

Theorem~\ref{orsRep}, Theorem~\ref{quantaleRep}, and the lemma above imply the following statement.
\begin{corollary} \label{orsRep2}
  Every residuated semigroup is isomorphic to the subalgebra of some relational quantale.
\end{corollary}

In particular, the representation we proposed implies the solution to \cite[Problem 19.17]{hirsch2002relation}.
\begin{theorem} \label{solution}
  ${\bf R}(;, \setminus, /, \leq)$ has the finite representation property.
\end{theorem}

\begin{proof}
  $ $

  Let $\mathcal{A}$ be a finite residuated semigroup.

  The representation of $\mathcal{A}$ as a subalgebra of a relational quantale clearly belongs to ${\bf R}(;, \setminus, /, \leq)$. This representation has the form

\begin{center}
  $\widehat{\mathcal{A}} = \langle \{ \widehat{\down{a}} \}_{a \in \mathcal{A}}, ;, \setminus, /, \subseteq \rangle$.
\end{center}

  Moreover, such a representation with the corresponding relational quantale has the finite base, if the original algebra is finite. The base set of the quantale $\widehat{\mathcal{Q}_{\mathcal{A}}}$ is the set of Galois stable subsets of $\mathcal{A}$, the cardinality of which is finite.
\end{proof}

As a corollary, of Theorem~\ref{solution} is that the Lambek calculus is complete with respect to finite representable residuated semigroups.

\begin{corollary} \label{fmp}
  The Lambek calculus is complete w.r.t finite relational models (has the FMP).
\end{corollary}

Moreover, finite axiomatisability and having the finite representation property of ${\bf R}(;, \setminus, /, \leq)$ imply that the membership of ${\bf R}(\tau)_{fin}$ is decidable.

\section{Join semilattice-ordered semigroups: the explicit axiomatisation and the finite representation property}

\subsection{Axiomatisating ${\bf R}(+, ;)$}

In this subsection, we show that ${\bf R}(+, ;)$ has a recursively enumerable universal axiomatisation. For that, we characterise representability using Ehrenfeucht-Fra\"{i}ss\'{e} games on prenetworks.

\begin{definition} Let $\mathcal{A}$ be a join-semilattice ordered semigroup. A \emph{prenetwork} over $\mathcal{A}$ is a tuple $(V, E, l)$, where $V$ is a set of vertices, $E$ is a set of edges such that $\langle V, E \rangle$ is a directed graph, and $l$ is a labelling function $l : E \to \operatorname{Up}(\mathcal{A})$.

  A prenetwork over $\mathcal{A} = (V, E, l)$ is a \emph{network} if the following hold:
  \begin{enumerate}
    \item For every $u, v \in V$ and for every $x,y,z \in \mathcal{A}$ $z \in l(u, v)$ and $z \leq x \: ; \: y$ implies $x \in N(u, w)$ and $y \in l(w, v)$ for some $w \in V$.
    \item For every $u, v, w \in V$ one has $l(u, v) ; l(v, w) \subseteq l(u, w)$.
    \item For every $u, v \in V$ $l(u,v)$ is join-prime. That is, for each $a, b \in \mathcal{A}$ if $a + b \in l(u,v)$, then either $a \in l(u,v)$ or $b \in l(u,v)$.
  \end{enumerate}
\end{definition}

If $\mathcal{A}$ is a prenetwork, then we will denote its sets of nodes as $\operatorname{Nodes}(\mathcal{A})$ occasionally.

Let $\mathcal{N}_1 = (V_1, E_1, l_1)$ and $\mathcal{N}_2 = (V_2, E_2, l_2)$ be (pre)networks, then $\mathcal{N}_1$ is a \emph{subnetwork} of $\mathcal{N}_2$, written as $\mathcal{N}_1 \subseteq \mathcal{N}_2$,
if $V_1 \subseteq V_2$, $E_1 \subseteq E_2$, and for all $x, y \in V_1$ if $a \in l_1(x, y)$ then there is $b \in l_2(x, y)$ with $b \leq a$. A $\mathcal{N}_1$ is an \emph{induced} sub(pre)network of $\mathcal{N}_2$, if $V_1 \subseteq V_2$ and for all $x, y \in V_1$ one has $l_1(x,y) = l_2(x,y)$.

Let $I$ be a non-empty index set and let $\{ \mathcal{N}_i \}_{i \in I}$ be an indexed set of prenetworks (where each $\mathcal{N}_i = (V_i, E_i, l_i)$), then $\mathcal{N} = \bigcup \limits_{i \in I} \mathcal{N}_i$ defined as $(V, E, l)$, where

\begin{enumerate}
  \item $V = \bigcup \limits_{i \in I} V_i$ and $E = \bigcup \limits_{i \in I} E_i$.
  \item $l(x, y) = \bigcup \limits_{ i \in I } l_i(x, y)$ for each $x, y \in V$.
\end{enumerate}

\begin{definition}
  Let $n \leq \omega$ and $\mathcal{A}$ a join semilattice-ordered semigroup. A play of the game $\mathcal{G}_n(\mathcal{A})$ has $n$ rounds and consists of $n$ finitary networks. As usual, we have two players, $\forall$ (Abelard) and $\exists$ (H\'{e}lo\"{i}se).

  \begin{enumerate}
    \item Round $0$: $\forall$ picks elements $a, b \in \mathcal{A}$ with $a \not\leq b$. $\exists$ responds with a prenetwork $\mathcal{N}_0 = (V_0 = \{ x_0, x_1 \}, E_0 = \{ (x_0, x_1)\}, l_0)$ such that $l_0(x_0, x_1) = \up{b}$.
    \item Round $n + 1$. Suppose, the prenetwork $\mathcal{N}_n = (V_n, E_n, l_n)$ has been played.

    $\forall$ has the following three options:
    \begin{enumerate}
      \item ({\bf Composition move}): $\forall$ can pick $x, y, z \in V_n$ with $a \in l_n(x, y)$ and $b \in l_n(y, z)$. We denote such a move as $N(x,y,z,a,b)$. Then $\exists$ responds with $\mathcal{N}_{n + 1} = (V_{n + 1}, E_{n + 1}, l_{n + 1})$ such that $\mathcal{N}_{n + 1}$
      is the same as $\mathcal{N}_n$, but $l_{n + 1}(x, z) = \up{(l_{n}(x, z)} \cup \{ a \: ; \: b\})$.
      \item ({\bf Witness move}):

      $\forall$ picks nodes $x, y \in V_n$ and $a, b \in \mathcal{A}$ such that $c \leq a ; b$ for $c \in l_n(x, y)$. $\exists$ has to find a witness. She responds with a fresh node $z$. We define the prenetwork $T$, the edges of which are $x, y, z$ with labelling:
      \begin{enumerate}
        \item $l_T(x, z) = \up{a}$
        \item $l_T(z, y) = \up{b}$
      \end{enumerate}
      For her response, $\exists$ plays $N_{n + 1} = N_n \cup T$
      \item ({\bf Join move}):

      $\forall$ picks nodes $x, y \in V_n$ and $a + b$ for $a, b \in \mathcal{A}$. $\exists$ has the following two alternatives for her response:
      \begin{enumerate}
        \item $\exists$ chooses $a$ and responds with the prenetwork $\mathcal{N}_{n + 1} = \langle V_{n + 1}, E_{n + 1}, l_{n + 1} \rangle$, where $l_{n+1}(x, y) = \up{(l_n(x,y) \cup \{ a \})}$.
        \item $\exists$ chooses $b$. The response is similar but $l_{n + 1}(x, y) = \up{(l_n(x,y) \cup \{ b \})}$.
      \end{enumerate}
    \end{enumerate}
  \end{enumerate}

  $\exists$ wins for the match of the game $\mathcal{G}_n(\mathcal{A})$ if for each $0 \leq i \leq n \leq \omega$ $\mathcal{N}_i$ is a network. $\exists$ has a winning strategy, if she can win all the matches. Otherwise, $\forall$ wins the game.
\end{definition}

\begin{lemma} Let $\mathcal{A} = \langle A, ;, + \rangle$ be a join semilattice-ordered semigroup,

  \begin{enumerate}
    \item If $\mathcal{A}$ is representable then $\exists$ has a winning strategy in $\mathcal{G}_{\omega}(\mathcal{A})$.
    \item If $\mathcal{A}$ is infinite and $\exists$ has a winning strategy in $\mathcal{G}_{\omega}(\mathcal{A})$ then $\mathcal{A}$ is representable.
  \end{enumerate}
\end{lemma}

\begin{proof}
$ $

  \begin{enumerate}
    \item This item has the proof similar to the first item of \cite[Proposition 5]{hirsch2005class}.

    \item
    Firstly, let us suppose that $|\mathcal{A}| = \omega$.

    Let $a, b \in \mathcal{A}$ such that $a \not\leq b$. We consider a play of the game where $\forall$ pick the pair $(a, b)$ in the initial round and plays $(\mathcal{N}, x, y, z, c, d)$ in the further rounds for each $x, y, z \in \operatorname{Nodes}(\mathcal{N})$ and $c,d \in \mathcal{A}$. Here, $c \in l_N(x, y)$ and $d \in l_N(y, z)$.

    $\forall$ also plays all rounds $(\mathcal{N},x,y,c,d)$ for each $x, y \in \operatorname{Nodes}(\mathcal{N})$ and $c,d \in \mathcal{A}$ such that there is $e \in \mathcal{A}$ such that
    $e \leq c ; d$ and $e \in l_N(x,y)$.

    $\forall$ picks also $c + d$ and vertices $x,y \in \operatorname{Nodes}(\mathcal{N})$ for $c, d \in \mathcal{A}$.

    We have the following play of a game that we define as a sequence of prenetworks where $\exists$ has a winning strategy for each $i < \omega$:

    \begin{center}
      $\mathcal{N}_0 \subseteq \mathcal{N}_1 \subseteq \mathcal{N}_2 \dots$
    \end{center}

    Let us put $\mathcal{N}^{*}(a, b) = \bigcup \limits_{i < \omega} \mathcal{N}_i$. It is clear that $\mathcal{N}^{*}$ is a network.

    Let us put the following network:

    \begin{center}
      $\mathcal{N} = \bigcup \limits_{\substack{a, b \in \mathcal{A} \\ a \not\leq b}} \mathcal{N}^{*}(a,b)$
    \end{center}

    $\mathcal{N}$ is really a network since it is the disjoint union of networks.

    The labelling function $l_{\mathcal{N}}$ respects $;$. Here, the argument is similar to the proof of \cite[Proposition 5]{hirsch2005class}.

    Let us define the $rep : \mathcal{A} \to \operatorname{Nodes}(\mathcal{N})$:
    \begin{center}
      $rep(a) = \{ (x, y) \: | \: \exists b \in \down{a} \:\: b \in l_{\mathcal{N}}(x, y)\}$
    \end{center}

    Let us ensure that $rep$ is a representation.

    \begin{itemize}
  \item Let us show that $rep(a + b) = rep(a) \cup rep(b)$

  Suppose $(x, y) \in rep(a + b)$. That is, there exists $c \leq a + b$ with $c \in l_{\mathcal{N}}(x, y)$, so does $a + b$ since $l_{\mathcal{N}}$ is an upper cone.

  $a + b \in l_{\mathcal{N}}(x, y)$, that is,

\begin{center}
$a + b \in \bigcup \limits_{ \substack{a_1, a_0 \in \mathcal{A} \\ a_1 \not\leq a_0}} l_{\mathcal{N}^{*}(a_1, a_0)}(x,y)$
\end{center}

That is, there are $a_1, a_0 \in \mathcal{A}$ with $a_1 \not\leq a_0$ such that $a + b \in l_{\mathcal{N}^{*}(a_1, a_0)}(x,y)$.
This means $a + b \in \bigcup \limits_{i < \omega} \mathcal{N}_i$.
$\forall$ makes all possible join moves, so either $a \in l_{\mathcal{N}_{i + 1}}(x, y)$ or $b \in l_{\mathcal{N}_{i + 1}}(x, y)$ depending on what $\exists$ chooses.
Thus, $(x, y) \in rep(a) \cup rep(b)$.

Suppose for the converse, $(x, y) \in rep(a)$. We need $(x, y) \in rep(a + b)$.
In other words, we have some $c \in \mathcal{A}$ with $c \leq a$ and $c \in l_{\mathcal{N}}(x, y)$.
We have $c \leq a \leq a + b$, so $(x, y) \in rep(a + b)$.

\item Let us show that $rep(a ; b) = rep(a) ; rep(b)$.

Suppose $(x, y) \in rep(a ; b)$. We need some $z$ with $(x, z) \in rep(a)$ and $(z, y) \in rep(b)$.

There is $c \leq a ; b$ with $c \in l_{\mathcal{N}}(x,y)$. That is, there are $a_1, a_0 \in \mathcal{A}$ and $\mathcal{N}_i$ such that $c \in l_{\mathcal{N}_i}(x, y)$ where $\forall$ plays $(a_1, a_0)$ for the initial round.

By the condition, $\forall$ makes the witness moves and $\exists$ responds with a witness. Her response is a fresh node $z$ such that $l_{\mathcal{N}_{i + 1}}(x, z) =  \up{(l_{\mathcal{N}_i}(x, z) \cup \{ a \})}$ and $l_{\mathcal{N}_{i + 1}}(z, y) = \up{(l_{\mathcal{N}_i}(z, y) \cup \{ b\})}$. The inclusion $rep(a ; b) \subseteq rep(a) ; rep(b)$ holds since all witness moves have been played and for every such a move there exists a witness.

\item Suppose $(x, y) \in rep(a) ; rep(b)$. We need $(x, y) \in rep(a;b)$. That is, there exists $z \in \operatorname{Nodes}(\mathcal{N})$ with $(x, z) \in rep(a)$ and $(z, y) \in rep(b)$. So, there are $c, d$ such that $c \leq a$ with $c \in l_{\mathcal{N}}(x, z)$ and $d \leq b$ with $d \in l_{\mathcal{N}}(z, y)$.
We also know that $l_{\mathcal{N}}(x, z) ; l_{\mathcal{N}}(z, y) \subseteq l_{\mathcal{N}}(x, y)$ because all composition moves have been played.
So $c ; d \in l_{\mathcal{N}}(x, y)$. That makes $(x, y) \in rep(a;b)$ since $c ; d \leq a ; b$.

\end{itemize}
For $|\mathcal{A}| \geq \aleph_1$ we apply the previous item and Tarksi-Vaught theorem on elementary chain union (see \cite[Theorem 2.5.2]{hodges1997shorter}).
  \end{enumerate}
\end{proof}

The following proposition is a version of \cite[Proposition 7.24]{hirsch2002relation} and the right-to-left part is proved using K\"{o}nig's lemma \cite[Exercise 5.6.3]{hodges1997shorter}.

\begin{proposition}
  Let $\mathcal{A}$ be a join semilattice-ordered semigroup, then there exists a game such that $\mathcal{A}$ is representable iff $\exists$ has a winning strategy in the all finite lenght games.
\end{proposition}

Now we are seeking to obtain the explicit axiomatisation of ${\bf R}(;, +)$. See \cite[Chapter 9]{hirsch2002relation} for the discussion in detail to have a more general methodology. Our purpose is to provide the recursively enumerable axiomatisation of ${\bf R}(;, +)$.

\begin{definition}
  Let $\operatorname{Var} = \{ v_0, v_1, ... \}$ be a countable set of variables. The set of terms $T$ is generated by the following grammar:

  \begin{center}
    $T ::= \operatorname{Var} \: | \: (T + T) \: | \: (T ; T)$
  \end{center}
\end{definition}

Let us define the equivalence relation $\approx$ on $T$ as follows for $t_1$ and $t_2$ are terms:
\begin{center}
$t_1 \approx t_2$ iff $F(\omega) \models t_1 = t_2$.
\end{center}
where $F(\omega)$ is the free countably generated algebra join semilattice-ordered semigroup.
We have the following partial order on $T$ defined as
\begin{center}
  $t_1 \preceq t_2$ iff $t_1 + t_2 \approx t_2$, that is, $F(\omega) \models t_1 + t_2 = t_2$
\end{center}

We call subset $A \subseteq T$ of terms called upward closed if for every term
$t \in A$ one has $\up{t} \subseteq A$, where $\up{t} = \{ t_1 \in T \: | \: t \preceq t_1 \}$.

\begin{definition}
  A \emph{term network} is a graph $\langle V, E, l \rangle$, where $\langle V, E \rangle$ is a directed graph and $l : E \to \operatorname{Up}(F(\omega), \preceq)$ is a labelling function.
\end{definition}

Let $\mathcal{A}$ be a join semilattice-ordered semigroup and $\vartheta : \operatorname{Var} \to \mathcal{A}$ a valuation. The value of complex terms is defined inductively for $a, b \in T$:

\begin{enumerate}
  \item $(a ; b)^{\vartheta} = a^{\vartheta} ; b^{\vartheta}$
  \item $(a + b)^{\vartheta} = a^{\vartheta} + b^{\vartheta}$
\end{enumerate}

As usual, one may think of $\vartheta$ as a homomorphism $\vartheta : F(\omega) \to \mathcal{A}$.

Let $\mathcal{N} = \langle V, E, l \rangle$ a term network, $\mathcal{A}$ be a join-semilattice ordered semigroup and $\vartheta : \operatorname{Var} \to {\mathcal{A}}$ a valuation. Let us define the prenetwork $\mathcal{N}^{\vartheta}$ with the same edges and vertices with labelling $l^{\vartheta}(x, y) = \{ t^{\vartheta} \: | \: t \in l_{\mathcal{N}}(x, y)\}$.

Let us ensure that $\mathcal{N}^{\vartheta}$ is well-defined. Let us consider $\vartheta$ as a homomorphism $F(\omega) \to \mathcal{A}$. We would like to know whether $\up{t^{\vartheta}} \subseteq l^{\vartheta}(x,y)$ for $t^{\vartheta} \in l^{\vartheta}(x,y)$. So $t \in l(x,y)$. Suppose $t \preceq t_1$, then $t_1$ clearly belongs to $l(x,y)$.
So $l^{\vartheta}(x,y)$ is upward closed by the construction.

Let $\mathcal{N}$ be a term network. We define the following three extensions of $\mathcal{N}$ reflecting the composition, witness, and join moves respectively:
\begin{enumerate}
  \item Let $x, y \in \operatorname{Nodes}(\mathcal{N})$ and $t$ a term. $\mathcal{N}_c$ is the extension of $\mathcal{N}$,
  where $\operatorname{Nodes}(\mathcal{N}_c) = \operatorname{Nodes}(\mathcal{N})$ and $\up{l_{\mathcal{N}}(x, y) \cup t}$ and $l_{\mathcal{N}_c}(u, v) = l_{\mathcal{N}}(u, v)$ for each $u \neq x$ and $v \neq y$. We denote this network as $\mathcal{N}_c(\mathcal{N}, x, y, t)$.
  \item
  Let $x, y \in \operatorname{Nodes}(\mathcal{N})$, $z$ a fresh node, and $t_1$, $t_2$ any terms. Let us define a network $T$ such that $\operatorname{Nodes}(T) = \{ x, y, z\}$. We define labelling as $l_{T}(x, y) = \up{t_1}$ and $l_{T}(y, z) = \up{t_2}$. So we put $\mathcal{N}_w = \mathcal{N} \cup T$.
  We denote this network as $\mathcal{N}_w(\mathcal{N}, x,y,z, t_1, t_2)$.
  \item Let $x, y \in \operatorname{Nodes}(\mathcal{N})$ and let $t_1, t_2$ be terms
  Let us define $T_i = \langle \{ x, y\}, \{ (x, y) \}, l_{T_i} \rangle$, where $l_{T_i}(x, y) = \up{(l_{\mathcal{N}}(x, y) \cup t_i)}$ for $i = 1,2$. So $\mathcal{N}_{j_1} = \mathcal{N} \cup T_1$ and $\mathcal{N}_{j_2} = \mathcal{N} \cup T_2$.
  We denote this as $\mathcal{N}_j(\mathcal{N}, x, y, t_1, t_2)$.
\end{enumerate}

\begin{lemma}\label{ax}
  For each $n < \omega$ there exists a first-order sentence $\sigma_n$ such that $\exists$ has a winning strategy in $\mathcal{G}_n(\mathcal{A})$ iff $\mathcal{A} \models \sigma_n$.
\end{lemma}

\begin{proof}
  As usual, for each $n < \omega$ we construct a formula $\sigma_n$ claiming that $\exists$ has a winning strategy in the game of lenght $n$. To be more precise, our purpose is to have
  \begin{center}
    $\exists$ has a winning strategy in $\mathcal{G}_n(\mathcal{N}^{\vartheta}, \mathcal{A}, \vartheta(v))$ if and only if $\mathcal{A} \models \sigma_{n}(\mathcal{N}, v)$
  \end{center}
  where $\mathcal{A}$ is a join semilattice-ordered semigroup and $\vartheta : \operatorname{Var} \to \mathcal{A}$ is a variable assignment.

  We define the following sequence of formulas $\{ \sigma_n \}_{n < \omega}$ inductively:
  \begin{enumerate}
    \item $\sigma_0(\mathcal{N}, v) = \bigwedge \limits_{a \in l_{\mathcal{N}}(x, y)} \neg (a \leq v)$

This formula merely claims that $\exists$ has a winning strategy in the zero length game.

    \item Suppose $\sigma_{n}(\mathcal{N}, v)$ for $n < \omega$. Let us define a formula $\sigma_{n + 1}$ claiming that $\exists$ always has a proper response for a network $\mathcal{N}$ being played (which is defined by $\sigma_{n}(\mathcal{N}, v)$).

    $\sigma_{n + 1}(\mathcal{N}, v)$ is defined as follows:
    \begin{center}
      $\sigma_{n + 1}(\mathcal{N}, v) = {\sigma_{n + 1}}_c(\mathcal{N}, v) \land {\sigma_{n + 1}}_w(\mathcal{N}, v) \land {\sigma_{n + 1}}_j(\mathcal{N}, v)$
    \end{center}
    where
    \begin{itemize}
      \item ${\sigma_{n + 1}}_c(\mathcal{N}, v) = \bigwedge \limits_{x, y, z \in \operatorname{Nodes}(\mathcal{N}), t_1 \in l_{\mathcal{N}}(x, y), t_2 \in l_{\mathcal{N}}(y, z)} \sigma_{n}(\mathcal{N}_c(x, z, t_1, t_2), v)$
      \item ${\sigma_{n + 1}}_w(\mathcal{N}, v) = \bigwedge \limits_{x,y \in \operatorname{Nodes}(\mathcal{N}), t \in l_{\mathcal{N}}(x,y)} \forall u_1, u_2 (t \leq u_1 ; u_2 \rightarrow \bigvee \limits_{w \in \operatorname{Nodes} \cup \{ z \}} \mathcal{N}_c(x,y,w, t_1, t_2))$, where $z$ is a fresh node.
      \item ${\sigma_{n + 1}}_j(\mathcal{N}, v) = \bigwedge \limits_{x, y \in \operatorname{Nodes}(\mathcal{N})} \sigma_{n}(\mathcal{N}_{j_1}(\mathcal{N}, x, y, t_1, t_2), v) \lor \sigma_{n}(\mathcal{N}_{j_2}(\mathcal{N}, x, y, t_1, t_2), v)$
    \end{itemize}
  \end{enumerate}

  So, $\exists$ has a winning strategy iff these formulas are true under the valuation $\vartheta$ since the formulas $\{ \sigma_n \}_{n < \omega}$ encode the presence of a winning strategy for $\exists$ on every finitary round.
\end{proof}

This inductive sequence of formulas provides us the explicit axiomatisation of the class of representable join semilattice-ordered semigroups.

\begin{theorem}
  ${\bf R}(+, ;)$ is axiomatised with the axioms of join semilattice-ordered semigroups and the coutable sequences of universal formulas $\{ \rho_n \}_{n < \omega}$. Moreover, ${\bf R}(+, ;)$ has a recursively enumerable axiomatisation.
\end{theorem}

\begin{proof}
  Being the class of ${\bf RRA}$-reducts, ${\bf R}(+, ;)$ forms a pseudo-elementary class (see \cite{eklof1977ultraproducts} to have a rigorous definition). So we apply \cite[Theorem 9.28]{hirsch2002relation}. Therefore, a join semilattice-ordered semigroup $\mathcal{A}$ is representable iff $\mathcal{A} \models \{ \sigma_n \}_{n < \omega}$. Every $\sigma_n$ for $n < \omega$ defined in the proof of Lemma~\ref{ax} is equivalent to the universal formula $\rho_n$ by bringing all universal quantifiers into the prefix of $\sigma_n$.
\end{proof}

\subsection{The finite representation property for ${\bf R}(+, ;)$}

One may consider $\mathcal{A}$, a finite join semilattice-ordered semigroup, as a quantale since the underlying semilattice is complete being finite. By Theorem~\label{quantaleRep}, $\mathcal{A}$ is isomorphic to the relational quantale $\widehat{A}$. From the other hand, if $\mathcal{Q}$ is a relational quantale, then $\Sigma A \subseteq \bigcup A$ for $A \subseteq \mathcal{Q}$. The converse inclusion does not hold in general, see \cite[Remark 3.2 and Example 3.6]{brown1993representation}.

Let $\mathcal{Q}$ be a quantale and $q \in \mathcal{Q}$ is called \emph{completely coprime}, if
\begin{center}
  $q \leq \sum \limits_{i \in I} q_i$ implies $q \leq q_i$ for some $i \in I$.
\end{center}
We denote the set of completely coprimes as $\operatorname{CCP}(\mathcal{Q})$.
In particular, if $|I| = 2$, then $q$ is called join-prime. If a quantale is finite, then $\operatorname{CCP}(\mathcal{Q})$ is clearly the set of all join-prime elements that we denote as $\operatorname{JP}(\mathcal{Q})$.

A quantale $\mathcal{Q}$ is called \emph{completely coprime algebraic} (CCPA), if every $q \in \mathcal{Q}$ has the form:
\begin{center}
  $q = \sum \limits \{ p \in \mathcal{Q} \: | \: p \in \operatorname{CCP}(\mathcal{Q}), p \leq q \}$
\end{center}

A quantale $\mathcal{Q}$ is called \emph{simple}, if
$\sum \limits_{i \in I} \widehat{A} = \bigcup \limits_{i \in A} \widehat{A}$ for $A \subseteq \mathcal{Q}$.

It is known that if a quantale $\mathcal{Q}$ is CCPA, then $\operatorname{CCP}(\mathcal{Q})$ is a set of generators, and every CCPA quantale is simple, see \cite[Lemma 5.3, Lemma 5.5, and Proposition 5.6]{brown1993representation}. As a corollary, any quantale CCPA is isomorphic to a relational quantale where all joins are unions.

Let $\mathcal{A}$ be a join semilattice, a subset $I \subseteq \mathcal{A}$ is called \emph{ideal}, if the following hold:
\begin{enumerate}
  \item If $x \in I$, then $\down{x} \subseteq I$,
  \item $x, y \in I$ implies $x + y \in I$.
\end{enumerate}
The poset $\langle \operatorname{Id}(\mathcal{A}), \subseteq \rangle$ consists of all ideals of $\mathcal{A}$ ordered by inclusion. $\mathcal{A}$ a join semilattice is called \emph{distributive}, if for each $x, a, b \in \mathcal{A}$ such that $x \leq a + b$, so there are $a' \leq a$ and $b' \leq b$ such that $x = a' + b'$. A finite $\mathcal{A}$ is distributive is the lattice $\operatorname{Id}(\mathcal{A})$ is distributive in the usual sense, see \cite[Lemma 184]{gratzer2011lattice}.

\begin{proposition} \label{distr}
  Let $\mathcal{A} \in {\bf R}(;,+)$ and $\mathcal{A}$ is finite, then
  \begin{enumerate}
    \item $\mathcal{A}$ is distributive,
    \item Every generator of $\mathcal{A}$ as a quantale is join-prime.
  \end{enumerate}
\end{proposition}

\begin{proof}
$ $

  \begin{enumerate}
    \item
    $\mathcal{A}$ is finite, so the $\operatorname{Id}(\mathcal{A})$ consists of principal ideals, that is, lower cones generated by elements of $\mathcal{A}$.

    \begin{center}
    $\operatorname{Id}(\mathcal{A}) = \{ \down{a} \: | \: a \in \mathcal{A} \}$
    \end{center}

    Let $h$ be a representation of $\mathcal{A}$, consider $h(\mathcal{A})$ and its set of ideals $\operatorname{Id}(h(\mathcal{A}))$. Intersection of ideals is defined is usual since intersection of ideals is an ideal, join is the defined as follows:

    \begin{center}
    $\down{h(a)} \vee \down{h(b)} = \down{(h(a) \cup h(b))}$
    \end{center}
    Note that $\down{(h(a) \cup h(b))} = \down{h(a + b)}$ since $h$ is a representation of $\mathcal{A}$.

    Let $c \in \mathcal{A}$, consider $h(c)$.

    Suppose $h(d) \in \down{h(c)} \cap \down{h(a + b)}$.
    $h(d) \in \down{h(a + b}$ implies $h(d) \subseteq h(a + b)$.

    Then if $(x, y) \in h(d)$, then either $(x, y) \in h(a)$ or $(x, y) \in h(b)$.
    If $(x, y) \in h(a)$ (or $h(b)$), then we have $h(d) \in \down{(h(c) \cap h(a))}$ (or $\down{(h(c) \cap h(b))}$).

    Suppose $h(d) \in (\down{h(c)} \cap \down{h(a)}) \vee (\down{h(c)} \cap \down{h(b)})$. So, we have either $h(d) \in \down{h(c)} \cap \down{h(a)}$ or $h(d) \in \down{h(c)} \cap \down{h(b)}$. So $h(d) \in \down{h(c)}$ anyway. If $h(d) \in \down{h(a)}$, then $d \leq a \leq a + b$, so $h(d) \in \down{h(a + b)}$.
    The second alternative is the same as the first one.

    So, $\operatorname{Id}(h(\mathcal{A}))$ is distributive, and, therefore, $\mathcal{A}$ is distibutive as a join-semilattice by \cite[Lemma 184]{gratzer2011lattice}.

    \item Let $g \in \mathcal{A}$ be a generator, suppose $g \leq a + b$, so there are $a' \leq a$ and $b' \leq b$ with $g = a' + b'$. $g$ is join-irreducible, thus, one has either $g = a'$ or $g = b'$. In fact, this statement generalises the fact that an element is join-prime iff it is join-irreducible in distributive lattices, see \cite[Lemma 5.11]{davey2002introduction}.
  \end{enumerate}
\end{proof}

The following lemma allows one to consider finite elements of ${\bf R}(;,+)$ as simple quantales. If $\mathcal{A}$ is finite and representable, then every $a$ has the form $\Sigma \{ g \in \mathcal{G}(\mathcal{A}) \: | \: g \leq a \}$, but every generator is join-prime by Proposition~\ref{distr}. So we have:

\begin{proposition}\label{quantalerepisok}
  Let $\mathcal{A}$ be a finite representable join-semilattice semigroup, $\mathcal{A}$ is completely coprime algebraic as a quantale and, therefore, is simple.
\end{proposition}

As a corollary, we have the following theorem:

\begin{theorem}
  ${\bf R}(+, ;)$ has the finite representation property.
\end{theorem}

\begin{proof}
  Let us show that if $\mathcal{A} \in {\bf R}(+, ;)$ such that $\mathcal{A}$ is finite, then
  $h(\mathcal{A})$ is isomorphic to some subalgebra of $\widehat{A}$. Consider the map
  $f : h(a) \mapsto \hat{a}$. $f$ preserves composition since $h$ and $\hat{.}$ are semigroup homomorphisms. The equality $f(h(a) \cup h(b)) = \hat{a} \cup \hat{b}$ holds since $\mathcal{A}$ is simple as a quantale by Proposition~\ref{quantalerepisok}.

  $\mathcal{A}$ is a relational quantale on the underlying of $\mathcal{A}$, but $\mathcal{A}$ is finite, so $\mathcal{A}$ has a representation over a finite base.
\end{proof}

In turn, the finite representation property and the presence of a recursively enumerable axiomatisation imply the following corollary.

\begin{corollary}
  The problem of membership to ${\bf R}(;, +)$ is decidable for finite structures.
\end{corollary}

\begin{proof}
  Let $\mathcal{A}$ be a finite semilattice-ordered semigroup. We check axioms defined in Lemma~\ref{ax} with the algorithm $S$ that yields ``no'' and halts, if $\mathcal{A}$ is not representable.

  In parallel, we check whether $\mathcal{A}$ has a finite representation. If there exists such $0 < n < \omega$ such that $\mathcal{A}$ is representable over size $n$, then the algorithm $T$ does output ``yes'' and terminates.

  So, one has either $S(\mathcal{A}) = \text{no}$ and $T(\mathcal{A}) = \text{yes}$.
\end{proof}


\section{Acknowledgements}

The author is sincerely grateful to Robin Hirsch, Ian Hodkinson, and his supervisor Ilya Shapirovsky for valuable comments. The previous version of this paper contained an error. Many thanks to Jas Semrl for noticing that.

\bibliographystyle{plain}
\bibliography{Paper}
\end{document}
